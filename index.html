<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Neon House â€” Slots</title>
  <meta name="description" content="Neon House â€” a demo casino landing with a builtâ€‘in 3Ã—3 slot machine. For fun only; no real money." />
  <style>
    :root{
      --bg:#070b16;          /* deep space */
      --bg2:#0e1730;         /* inner glow */
      --text:#e6f1ff;        /* primary text */
      --muted:#b6c3d6;       /* secondary text */
      --accent:#00e6ff;      /* cyan */
      --accent2:#9dff00;     /* lime */
      --warn:#ff3366;        /* danger */
      --card:rgba(255,255,255,0.06);
      --cardBorder:rgba(255,255,255,0.16);
      --shadow:0 12px 40px rgba(0,0,0,.55);
    }

    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, "Helvetica Neue", Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1000px 600px at 20% 0%, #102046 0%, transparent 60%),
        radial-gradient(900px 700px at 80% 40%, #111f4a 0%, transparent 60%),
        linear-gradient(180deg, var(--bg), var(--bg2));
      min-height:100%;
    }

    a{color:inherit}

    .container{max-width:1100px;margin:0 auto;padding:24px}

    header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:8px 0 24px}
    .brand{display:flex;align-items:center;gap:12px}
    .logo{
      width:46px;height:46px;border-radius:12px;display:grid;place-items:center;
      background:linear-gradient(135deg,var(--accent),var(--accent2));
      color:#001018;font-weight:900;text-shadow:none;box-shadow:var(--shadow);
    }
    .title{display:flex;flex-direction:column}
    .title h1{font-size:22px;margin:0;letter-spacing:0.6px}
    .title small{opacity:.75}

    nav{display:flex;gap:10px;flex-wrap:wrap}
    .btn{appearance:none;border:1px solid var(--cardBorder);background:var(--card);color:var(--text);padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700}
    .btn.primary{border-color:transparent;background:linear-gradient(90deg,var(--accent),var(--accent2));color:#001018}
    .btn:active{transform:translateY(1px)}

    /* Hero */
    .hero{display:grid;grid-template-columns:1.2fr .8fr;gap:20px;align-items:center}
    .heroCard{background:var(--card);border:1px solid var(--cardBorder);border-radius:18px;box-shadow:var(--shadow);padding:22px}
    .hero h2{font-size:30px;margin:0 0 10px;letter-spacing:.5px}
    .hero p{opacity:.9;margin:0}

    /* Games grid */
    .grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px;margin-top:18px}
    .card{background:var(--card);border:1px solid var(--cardBorder);border-radius:18px;box-shadow:var(--shadow);padding:18px;display:flex;flex-direction:column;gap:12px;min-height:170px}
    .card h3{margin:0 0 6px}
    .badge{font-size:12px;opacity:.8;border:1px solid var(--cardBorder);padding:2px 8px;border-radius:999px;width:max-content}
    .muted{color:var(--muted)}

    /* Footer */
    footer{opacity:.7;text-align:center;margin:24px 0 8px;font-size:13px}

    /* Modal */
    dialog{border:none;border-radius:18px;background:rgba(10,14,28,.82);backdrop-filter:blur(10px);color:var(--text);width:min(960px,96vw);padding:0;box-shadow:var(--shadow)}
    dialog::backdrop{background:rgba(0,0,0,.45)}
    .modalHeader{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--cardBorder)}
    .modalBody{padding:16px}

    /* SLOT MACHINE */
    .slot-wrap{display:grid;grid-template-columns:1fr 300px;gap:16px}
    .slot-panel{background:var(--card);border:1px solid var(--cardBorder);border-radius:16px;padding:14px}

    .slot-cabinet{position:relative;border-radius:16px;padding:14px;background:radial-gradient(120% 160% at 10% 10%, #1a2a5b 0%, #101b3b 40%, #0b1226 100%);border:1px solid #203060;box-shadow:inset 0 0 0 1px rgba(255,255,255,.06), inset 0 20px 80px rgba(0,0,0,.35)}
    .slot-display{position:relative;margin:6px 0;border-radius:12px;border:1px solid #2a3b74;padding:10px;background:linear-gradient(180deg,#0e1531,#0a1026);box-shadow:inset 0 10px 50px rgba(0,0,0,.6)}
    .reels{display:grid;grid-template-columns:repeat(3,1fr);gap:10px;height:180px}
    .reel{overflow:hidden;border-radius:10px;border:1px solid #2a3b74;background:radial-gradient(100% 120% at 50% 0%, #0c1638, #0a1126)}
    .strip{display:flex;flex-direction:column;transition:transform 1.1s cubic-bezier(.2,.9,.2,1);will-change:transform}
    .cell{height:60px;display:grid;place-items:center;font-size:34px;filter:drop-shadow(0 0 10px rgba(0,230,255,.35))}

    .lines{position:absolute;inset:10px;pointer-events:none}
    .line{position:absolute;left:0;right:0;height:3px;background:linear-gradient(90deg,var(--accent),transparent);opacity:.0;transition:opacity .25s}
    .line.active{opacity:.8}
    .line.top{top:30px}
    .line.mid{top:90px}
    .line.bot{top:150px}
    .line.d1{transform-origin:left center;top:30px;height:3px;background:linear-gradient(90deg,var(--accent2),transparent);transform:skewY(20deg)}
    .line.d2{transform-origin:left center;top:150px;height:3px;background:linear-gradient(90deg,var(--accent2),transparent);transform:skewY(-20deg)}

    .controls{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-between;margin-top:10px}
    .pill{background:var(--card);border:1px solid var(--cardBorder);border-radius:999px;padding:6px 10px;display:flex;align-items:center;gap:6px}
    .num{min-width:40px;text-align:center;font-weight:800}

    .spinbar{display:flex;gap:10px;align-items:center}
    .spin{font-weight:900;letter-spacing:.6px}
    .spin[disabled]{opacity:.5;cursor:not-allowed}

    .paytable{font-size:14px}
    .paytable table{border-collapse:collapse;width:100%}
    .paytable th,.paytable td{padding:6px 8px;border-bottom:1px solid rgba(255,255,255,.1);text-align:left}

    .small{font-size:12px;opacity:.8}

    @media (max-width: 880px){
      .hero{grid-template-columns:1fr}
      .slot-wrap{grid-template-columns:1fr}
      .reels{height:162px}
      .cell{height:54px}
      .line.top{top:27px}.line.mid{top:81px}.line.bot{top:135px}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="brand">
        <div class="logo">NH</div>
        <div class="title">
          <h1>Neon House</h1>
          <small>Demo casino landing Â· for fun only</small>
        </div>
      </div>
      <nav>
        <button class="btn" id="openSlots">Play Slots</button>
        <button class="btn" disabled title="Coming soon">Blackjack â–£</button>
        <button class="btn" disabled title="Coming soon">Roulette â—</button>
        <button class="btn primary" id="addToHome" style="display:none">Install</button>
      </nav>
    </header>

    <section class="hero">
      <div class="heroCard">
        <h2>Welcome to Neon House</h2>
        <p>Polished, plugâ€‘andâ€‘play landing page with a builtâ€‘in 3Ã—3 slot machine. Keep credits locally, no servers, no libraries. Perfect for GitHub Pages. Add more games over time.</p>
        <p class="small" style="margin-top:10px">Tip: Brand name, colors, and copy live right here in <code>index.html</code>.</p>
      </div>
      <div class="heroCard">
        <div class="muted" style="margin-bottom:8px">Featured game</div>
        <div style="display:flex;align-items:center;justify-content:space-between;gap:10px">
          <div>
            <h3 style="margin:0 0 6px">Slot Rush â€” 3Ã—3</h3>
            <div class="small">Cyan neon visuals, 5 paylines, fair RNG, offlineâ€‘ready.</div>
          </div>
          <button class="btn primary" id="playFromHero">â–¶ Play now</button>
        </div>
      </div>
    </section>

    <section class="grid" aria-label="Games">
      <article class="card">
        <div class="badge">Slots</div>
        <h3 style="margin:0">Slot Rush â€” 3Ã—3</h3>
        <p class="muted" style="margin:0">Classic 5â€‘line machine with ğŸ’ ğŸ’ 7ï¸âƒ£ and more.</p>
        <div style="margin-top:auto;display:flex;gap:10px">
          <button class="btn" id="playFromCard">Play</button>
          <button class="btn" id="showPaytable">Paytable</button>
        </div>
      </article>
      <article class="card" aria-disabled="true">
        <div class="badge">Coming soon</div>
        <h3 style="margin:0">Blackjack</h3>
        <p class="muted" style="margin:0">Houseâ€‘edge explained, basic strategy helper.</p>
        <div style="margin-top:auto"><button class="btn" disabled>WIP</button></div>
      </article>
      <article class="card" aria-disabled="true">
        <div class="badge">Coming soon</div>
        <h3 style="margin:0">Roulette</h3>
        <p class="muted" style="margin:0">European singleâ€‘zero wheel, demo bankroll.</p>
        <div style="margin-top:auto"><button class="btn" disabled>WIP</button></div>
      </article>
    </section>

    <footer>
      For entertainment only Â· No real money gambling. Please play responsibly.
    </footer>
  </div>

  <!-- SLOTS MODAL -->
  <dialog id="slotModal">
    <div class="modalHeader">
      <strong>Slot Rush â€” 3Ã—3</strong>
      <div style="display:flex;align-items:center;gap:8px">
        <span class="small">For fun only</span>
        <button class="btn" id="closeSlots">âœ• Close</button>
      </div>
    </div>
    <div class="modalBody">
      <div class="slot-wrap">
        <!-- Left: Cabinet + Controls -->
        <section class="slot-panel">
          <div class="slot-cabinet">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
              <div class="pill">Credits: <strong id="credits" style="margin-left:6px">â€”</strong></div>
              <button class="btn" id="resetCredits" title="Reset to 1000 demo credits">Reset</button>
            </div>
            
            <div class="slot-display" aria-live="polite">
              <div class="reels" id="reels">
                <div class="reel"><div class="strip" id="strip0"></div></div>
                <div class="reel"><div class="strip" id="strip1"></div></div>
                <div class="reel"><div class="strip" id="strip2"></div></div>
              </div>
              <div class="lines">
                <div class="line top" id="line0"></div>
                <div class="line mid" id="line1"></div>
                <div class="line bot" id="line2"></div>
                <div class="line d1" id="line3"></div>
                <div class="line d2" id="line4"></div>
              </div>
            </div>

            <div class="controls">
              <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
                <div class="pill">Lines: <strong>5</strong></div>
                <div class="pill">Bet/Line: 
                  <button class="btn" id="betMinus">âˆ’</button>
                  <span class="num" id="bet">1</span>
                  <button class="btn" id="betPlus">+</button>
                </div>
                <div class="pill">Total Bet: <strong id="total">5</strong></div>
              </div>
              <div class="spinbar">
                <button class="btn" id="auto">Auto</button>
                <button class="btn primary spin" id="spin">SPIN</button>
              </div>
            </div>

            <div class="small" id="status" style="margin-top:8px;min-height:18px">Â </div>
          </div>
        </section>

        <!-- Right: Paytable / Info -->
        <aside class="slot-panel paytable">
          <h3 style="margin:0 0 8px">Paytable</h3>
          <table>
            <thead><tr><th>Symbols</th><th>3 in a row</th></tr></thead>
            <tbody>
              <tr><td>7ï¸âƒ£ 7ï¸âƒ£ 7ï¸âƒ£</td><td>Ã—50</td></tr>
              <tr><td>ğŸ’ ğŸ’ ğŸ’</td><td>Ã—25</td></tr>
              <tr><td>â­ â­ â­</td><td>Ã—15</td></tr>
              <tr><td>ğŸ”” ğŸ”” ğŸ””</td><td>Ã—10</td></tr>
              <tr><td>ğŸ’ ğŸ’ ğŸ’</td><td>Ã—5</td></tr>
              <tr><td>ğŸ‹ ğŸ‹ ğŸ‹</td><td>Ã—4</td></tr>
              <tr><td>Any two ğŸ’ on a payline</td><td>Ã—2</td></tr>
            </tbody>
          </table>
          <p class="small" style="margin-top:8px">5 paylines: 3 rows + 2 diagonals. Payouts shown are perâ€‘line multiples of Bet/Line.</p>
          <hr style="border-color:rgba(255,255,255,.12);margin:12px 0">
          <p class="small">RNG: clientâ€‘side, seedless, uniform with weights. No servers, no tracking. All credits saved locally.</p>
        </aside>
      </div>
    </div>
  </dialog>

  <!-- Paytable quick view dialog -->
  <dialog id="ptDialog">
    <div class="modalHeader">
      <strong>Paytable â€” Slot Rush</strong>
      <button class="btn" id="ptClose">âœ• Close</button>
    </div>
    <div class="modalBody paytable">
      <table>
        <thead><tr><th>Symbols</th><th>3 in a row</th></tr></thead>
        <tbody>
          <tr><td>7ï¸âƒ£ 7ï¸âƒ£ 7ï¸âƒ£</td><td>Ã—50</td></tr>
          <tr><td>ğŸ’ ğŸ’ ğŸ’</td><td>Ã—25</td></tr>
          <tr><td>â­ â­ â­</td><td>Ã—15</td></tr>
          <tr><td>ğŸ”” ğŸ”” ğŸ””</td><td>Ã—10</td></tr>
          <tr><td>ğŸ’ ğŸ’ ğŸ’</td><td>Ã—5</td></tr>
          <tr><td>ğŸ‹ ğŸ‹ ğŸ‹</td><td>Ã—4</td></tr>
          <tr><td>Any two ğŸ’ on a payline</td><td>Ã—2</td></tr>
        </tbody>
      </table>
      <p class="small" style="margin-top:8px">5 paylines: 3 rows + 2 diagonals. Payouts shown are perâ€‘line multiples of Bet/Line.</p>
    </div>
  </dialog>

  <script>
    // ===== Basic PWA install prompt (optional) =====
    let deferredPrompt; window.addEventListener('beforeinstallprompt', (e)=>{ e.preventDefault(); deferredPrompt=e; const btn=document.getElementById('addToHome'); btn.style.display='inline-block'; btn.onclick=async()=>{ if(!deferredPrompt) return; deferredPrompt.prompt(); deferredPrompt=null; btn.style.display='none'; };});

    // ===== Helpers =====
    const $ = (sel, ctx=document) => ctx.querySelector(sel);
    const $$ = (sel, ctx=document) => Array.from(ctx.querySelectorAll(sel));
    const clamp = (n, lo, hi) => Math.max(lo, Math.min(hi, n));
    const rand = (a,b)=> Math.random()*(b-a)+a;

    // ===== Landing interactions =====
    const slotModal = $('#slotModal');
    $('#openSlots').addEventListener('click', ()=> slotModal.showModal());
    $('#playFromHero').addEventListener('click', ()=> slotModal.showModal());
    $('#playFromCard').addEventListener('click', ()=> slotModal.showModal());
    $('#closeSlots').addEventListener('click', ()=> slotModal.close());

    const ptDialog=$('#ptDialog');
    $('#showPaytable').addEventListener('click',()=>ptDialog.showModal());
    $('#ptClose').addEventListener('click',()=>ptDialog.close());

    // ===== Slots implementation =====
    const strips = [$('#strip0'), $('#strip1'), $('#strip2')];
    const creditsEl = $('#credits');
    const betEl = $('#bet');
    const totalEl = $('#total');
    const statusEl = $('#status');
    const spinBtn = $('#spin');
    const autoBtn = $('#auto');

    const LS_KEY = 'neon_house_credits_v1';

    let credits = parseInt(localStorage.getItem(LS_KEY) || '1000', 10);
    let betPerLine = 1;
    const LINES = 5;
    let spinning = false;
    let auto = false;

    const SYMBOLS = [
      {ch:'7ï¸âƒ£', w:1, p3:50},
      {ch:'ğŸ’', w:2, p3:25},
      {ch:'â­',  w:3, p3:15},
      {ch:'ğŸ””', w:4, p3:10},
      {ch:'ğŸ’', w:6, p3:5},
      {ch:'ğŸ‹', w:7, p3:4},
    ];

    function buildStrip(){
      const pool=[];
      for(const s of SYMBOLS){ for(let i=0;i<s.w*4;i++) pool.push(s.ch); } // make a longer pool to avoid repetition patterns
      // shuffle
      for(let i=pool.length-1;i>0;i--){ const j=(Math.random()* (i+1))|0; [pool[i], pool[j]] = [pool[j], pool[i]]; }
      return pool;
    }

    const reelData=[buildStrip(), buildStrip(), buildStrip()];

    function renderStrips(){
      for(let r=0;r<3;r++){
        const el=strips[r]; el.innerHTML='';
        // render 3x the strip so we can loop visually
        const combined=[...reelData[r],...reelData[r],...reelData[r]];
        combined.forEach(sym=>{
          const d=document.createElement('div'); d.className='cell'; d.textContent=sym; el.appendChild(d);
        });
        el.style.transform='translateY(0)';
      }
    }

    function updateHUD(){
      creditsEl.textContent=credits.toString();
      betEl.textContent=betPerLine; totalEl.textContent= (betPerLine*LINES).toString();
      localStorage.setItem(LS_KEY, String(credits));
    }

    function setStatus(msg){ statusEl.textContent = msg || '\u00A0'; }

    function symbolInfo(ch){ return SYMBOLS.find(s=>s.ch===ch); }

    function getWindowStops(){
      // pick an index for each reel; visual strip rendered 3x, but we map to base strip length
      return [0,1,2].map(r=> (Math.random()*reelData[r].length)|0 );
    }

    function cellsAt(stops){
      // returns 3x3 matrix [col][row]
      const grid=[[],[],[]];
      for(let r=0;r<3;r++){
        const base=reelData[r]; const n=base.length;
        const top = (stops[r])%n; const mid=(top+1)%n; const bot=(top+2)%n;
        grid[r][0]=base[top]; grid[r][1]=base[mid]; grid[r][2]=base[bot];
      }
      return grid;
    }

    const lineDefs = [
      [[0,0],[1,0],[2,0]], // top
      [[0,1],[1,1],[2,1]], // mid
      [[0,2],[1,2],[2,2]], // bot
      [[0,0],[1,1],[2,2]], // diag TL-BR
      [[0,2],[1,1],[2,0]], // diag BL-TR
    ];

    function evaluate(grid){
      let payout=0; const hitLines=[]; let explain=[];
      for(let i=0;i<lineDefs.length;i++){
        const coords=lineDefs[i];
        const lineSyms = coords.map(([c,r])=> grid[c][r]);
        // 3 of a kind
        if(lineSyms[0]===lineSyms[1] && lineSyms[1]===lineSyms[2]){
          const p = symbolInfo(lineSyms[0]).p3 * betPerLine; payout += p; hitLines.push(i); explain.push(`${lineSyms.join(' ')} Ã—${symbolInfo(lineSyms[0]).p3}`); continue;
        }
        // Any two cherries bonus
        const cherries = lineSyms.filter(s=>s==='ğŸ’').length;
        if(cherries===2){ const p = 2 * betPerLine; payout += p; hitLines.push(i); explain.push(`Two ğŸ’ Ã—2`); }
      }
      return {payout, hitLines, explain};
    }

    function animateLines(lines){
      // flash active lines briefly
      [0,1,2,3,4].forEach(i=> $('#line'+i).classList.remove('active'));
      if(!lines.length) return;
      lines.forEach(i=> $('#line'+i).classList.add('active'));
      setTimeout(()=> lines.forEach(i=> $('#line'+i).classList.remove('active')), 900);
    }

    function canSpin(){ return !spinning && credits >= betPerLine*LINES; }

    function spinOnce(){
      if(!canSpin()){ setStatus('Not enough credits. Lower bet or reset.'); return; }
      spinning = true; spinBtn.disabled = true; autoBtn.disabled = true;
      setStatus('Spinningâ€¦');

      const totalBet = betPerLine*LINES; credits -= totalBet; updateHUD();

      const stops = getWindowStops();
      // animate strips: move to position that shows stops in middle row visually
      for(let r=0;r<3;r++){
        const baseLen=reelData[r].length; const strip=strips[r];
        const visibleIndex = stops[r] + baseLen; // middle of the 3x render
        const translate = -(visibleIndex-1) * 60; // ensure middle row is the chosen symbol
        // random spin offset animation first
        const extraTurns = (2 + r) * baseLen + ((Math.random()*baseLen)|0);
        strip.style.transition='transform 1.1s cubic-bezier(.2,.9,.2,1)';
        requestAnimationFrame(()=>{ strip.style.transform = `translateY(${translate - extraTurns*60}px)`; });
        // then snap to final position after duration
        setTimeout(()=>{
          strip.style.transition='none'; strip.style.transform = `translateY(${translate}px)`;
        }, 1120 + r*30);
      }

      // settle & evaluate
      setTimeout(()=>{
        const grid = cellsAt(stops);
        const {payout, hitLines, explain} = evaluate(grid);
        animateLines(hitLines);
        if(payout>0){ credits += payout; updateHUD(); setStatus(`Win +${payout}. ${explain.join(' Â· ')}`); }
        else { setStatus('No win.'); }
        spinning=false; spinBtn.disabled=false; autoBtn.disabled=false;
        if(auto){ setTimeout(()=> spinOnce(), 350); }
      }, 1200);
    }

    // UI wiring
    $('#betMinus').addEventListener('click', ()=>{ betPerLine = clamp(betPerLine-1, 1, 50); updateHUD(); });
    $('#betPlus').addEventListener('click', ()=>{ betPerLine = clamp(betPerLine+1, 1, 50); updateHUD(); });
    $('#resetCredits').addEventListener('click', ()=>{ credits = 1000; updateHUD(); setStatus('Credits reset to 1000.'); });
    spinBtn.addEventListener('click', ()=> spinOnce());
    autoBtn.addEventListener('click', ()=>{ auto = !auto; autoBtn.classList.toggle('primary', auto); autoBtn.textContent = auto? 'Auto: ON':'Auto'; if(auto && !spinning) spinOnce(); });

    // Build reels & first paint
    function mountSlot(){
      renderStrips(); updateHUD(); setStatus('');
    }
    mountSlot();

    // Close modal stops auto
    $('#closeSlots').addEventListener('click', ()=>{ auto=false; autoBtn.classList.remove('primary'); autoBtn.textContent='Auto'; });

    // Accessibility: close with ESC
    slotModal.addEventListener('cancel', ()=>{ auto=false; });
  </script>
</body>
</html>
